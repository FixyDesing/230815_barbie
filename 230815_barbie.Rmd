---
title: "230814_barbie"
author: "Robbe Van Molle"
date: "2023-08-14"
output: html_document
---

```{r}
library(rvest)

# De URL van de website die je wilt scrapen
url <- "https://www.boxofficemojo.com/year/world/?sort=worldwideGrossToDate&ref_=bo_ydw__resort#table"

# Lees de webpagina in
webpage <- read_html(url)

# Gebruik css selectors om de juiste tabel te selecteren en haal deze op
table <- webpage %>%
  html_node("table.a-bordered.a-horizontal-stripes.a-size-base.a-span12.mojo-body-table.mojo-table-annotated") %>%
  html_table()

# Bekijk de eerste paar rijen van de tabel
table
```

```{r}
# Verwijder '$' en ',' tekens en converteer naar numeriek
table$Worldwide <- as.numeric(gsub(",", "", gsub("\\$", "", table$Worldwide)))
table$Domestic <- as.numeric(gsub(",", "", gsub("\\$", "", table$Domestic)))
table$Foreign <- as.numeric(gsub(",", "", gsub("\\$", "", table$Foreign)))


# Bekijk de eerste paar rijen van de tabel
table

write.csv(table, "box_office_data.csv", row.names = FALSE)
```


```{r}
# Selecteer de gewenste kolommen en de eerste 10 rijen
table_filtered <- table[, c("Release Group", "Worldwide", "Domestic", "Foreign")][1:10, ]

# Wijzig kolomnamen
colnames(table_filtered)[colnames(table_filtered) == "Release Group"] <- "Film"
colnames(table_filtered)[colnames(table_filtered) == "Worldwide"] <- "Opbrengste"
colnames(table_filtered)[colnames(table_filtered) == "Domestic"] <- "Amerikaanse Markt"
colnames(table_filtered)[colnames(table_filtered) == "Foreign"] <- "Andere Markt"

# Bekijk de eerste paar rijen van de tabel
table_filtered

write.csv(table_filtered, "box_office_data_filtered.csv", row.names = FALSE)
```

